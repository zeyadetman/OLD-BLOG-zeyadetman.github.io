<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <title>Zeyad Etman | How to pass state between components in reactjs (Full Code)</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="How to pass state between components in reactjs (Full Code)" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="/projects/2018/07/25/How-to-pass-state-between-components-in-reactjs.html" />
<meta property="og:url" content="/projects/2018/07/25/How-to-pass-state-between-components-in-reactjs.html" />
<meta property="og:site_name" content="Zeyad Etman" />
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link rel="stylesheet" href="/css/all.css">
<link rel="stylesheet" href="/css/default.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Zeyad Etman" /></head>
<body>

<div class="siteDefault">


  <div class="infosection">
    <div style="position: fixed; max-width: 280px;">
      <button
        data-balloon="What's the formula for this rotationðŸ¤”?
          check it out more times, and send your thoughts to me."
        data-balloon-pos="up"
        data-balloon-length="large"
        style="display: contents;"
      >
        <img src="/images/me.jpg" />
      </button>
      <h1>Zeyad Etman</h1>
      <h2>Software Engineer, Front-End Developer</h2>
      <ul>
        <li><a href="https://github.com/zeyadetman"><i class="fab fa-github"></i></a></li>
        <li><a href="https://twitter.com/zeyadetman"><i class="fab fa-twitter"></i></a></li>
        <li><a href="https://www.facebook.com/zeyadetman"><i class="fab fa-facebook-f"></i></a></li>
        <li><a href="https://www.linkedin.com/in/zeyadetman"><i class="fab fa-linkedin-in"></i></a></li>
        <li><a href="mailto:zeyadetman@gmail.com"><i class="far fa-envelope"></i></a></li>
      </ul>
    </div>
  </div>
  
  <div class="mainmenu">
    <ul class="mainmenu__list">
      <li>
        <a href="/">Home</a>
      </li>
      <li>
          <a href="/projects">Projects</a>
      </li>
      <li>
          <a href="/blog">Blog</a>
      </li>
    </ul>
    <div class="mainmenu__content">
      <style>
.content-body img{
    max-width: 100%;
}

.post-title{
  margin: 0 auto 15px auto;
  padding: 15px;
  width: fit-content;
  text-align: center;
  border-radius: 5px;
  color: #3e3e3e;
  background: rgba(255, 192, 4, 0.88);
}

.post-info{
  padding-bottom: 15px;
  border-bottom: 1px solid #808080;
  color: #808080;
  display: flex;
  justify-content: center;
  align-items: center;
}
</style>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5abac57df3c38cac"></script> 

<h2 class="post-title">How to pass state between components in reactjs (Full Code)</h2>
<p class="post-info">Jul 25, 2018<span style="margin: 0 10px;">projects</span>
<a class="twitter-follow-button"
  href="https://twitter.com/zeyadetman"
  data-size="small"></a>
</p>

<div class="content-body">
<p>In this post, iâ€™ll explain how to pass a state between components in Reactjs.
Weâ€™ll build a small â€˜How many books did you read?â€™ app, in this application, we
have two main components one big called â€˜Libraryâ€™ and another small â€˜Bookâ€™, we have 3 books in the library state and each book has its own state. check any book to count as read. <a href="https://zeyadetman.github.io/howmanybooks/">try the app here</a></p>

<p><strong>Letâ€™s begin with code:</strong></p>

<h2 id="passing-state-from-parent-to-child">Passing state from parent to child</h2>

<p>In our Library component we have this state</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">reads</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
	<span class="na">books</span><span class="p">:</span> <span class="p">[</span>
		<span class="p">{</span>
			<span class="na">name</span><span class="p">:</span> <span class="s1">'Zero to one'</span><span class="p">,</span>
			<span class="na">isbn</span><span class="p">:</span> <span class="s1">'9780804139298'</span><span class="p">,</span>
			<span class="na">author</span><span class="p">:</span> <span class="s1">'Peter Thiel'</span><span class="p">,</span>
			<span class="na">cover</span><span class="p">:</span>
			<span class="s1">'https://images.gr-assets.com/books/1414347376l/18050143.jpg'</span><span class="p">,</span>
			<span class="na">status</span><span class="p">:</span> <span class="kc">false</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="na">name</span><span class="p">:</span> <span class="s2">"The Manager's Path"</span><span class="p">,</span>
			<span class="na">isbn</span><span class="p">:</span> <span class="s1">'9781491973899'</span><span class="p">,</span>
			<span class="na">author</span><span class="p">:</span> <span class="s1">'Camille Fournier'</span><span class="p">,</span>
			<span class="na">cover</span><span class="p">:</span>
			<span class="s1">'https://images.gr-assets.com/books/1484107737l/33369254.jpg'</span><span class="p">,</span>
			<span class="na">status</span><span class="p">:</span> <span class="kc">false</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="na">name</span><span class="p">:</span> <span class="s1">'Calculus, Better Explained'</span><span class="p">,</span>
			<span class="na">isbn</span><span class="p">:</span> <span class="s1">'9781470070700'</span><span class="p">,</span>
			<span class="na">author</span><span class="p">:</span> <span class="s1">'Kalid Azad'</span><span class="p">,</span>
			<span class="na">cover</span><span class="p">:</span>
			<span class="s1">'https://images.gr-assets.com/books/1448590460l/27993945.jpg'</span><span class="p">,</span>
			<span class="na">status</span><span class="p">:</span> <span class="kc">false</span>
		<span class="p">}</span>
	<span class="p">]</span>
<span class="p">};</span>
</code></pre></div></div>

<p>and want to create <code class="highlighter-rouge">this.state.books.length</code> - as a number - <code class="highlighter-rouge">Book</code> components each have props from the <code class="highlighter-rouge">books</code> array of the <code class="highlighter-rouge">Library</code> componentâ€™s state. We have to deal with the two components.</p>

<p><strong>First</strong> with the parent, we have to create the <code class="highlighter-rouge">Book</code> component <code class="highlighter-rouge">this.state.books.length</code> - as a number - times, and pass our diffrent values to them Like this:</p>

<p><a href="https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Library/Library.jsx">Full Code here</a></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">_book</span><span class="p">,</span> <span class="nx">_id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
		<span class="k">return</span> <span class="p">(</span>
			<span class="o">&lt;</span><span class="nx">Book</span>
				<span class="nx">handleCounter</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleCounter</span><span class="p">}</span>
				<span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">_id</span><span class="p">}</span>
				<span class="nx">id</span><span class="o">=</span><span class="p">{</span><span class="nx">_book</span><span class="p">.</span><span class="nx">isbn</span><span class="p">}</span>
				<span class="nx">name</span><span class="o">=</span><span class="p">{</span><span class="nx">_book</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
				<span class="nx">isbn</span><span class="o">=</span><span class="p">{</span><span class="nx">_book</span><span class="p">.</span><span class="nx">isbn</span><span class="p">}</span>
				<span class="nx">author</span><span class="o">=</span><span class="p">{</span><span class="nx">_book</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span>
				<span class="nx">cover</span><span class="o">=</span><span class="p">{</span><span class="nx">_book</span><span class="p">.</span><span class="nx">cover</span><span class="p">}</span>
			<span class="sr">/</span><span class="err">&gt;
</span>		<span class="p">);</span>
	<span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p><em>Note</em> ignore <code class="highlighter-rouge">handleCounter</code> for now.</p>

<p><strong>Second</strong> with the child <code class="highlighter-rouge">Book</code>, we have the values from parent, letâ€™s use them:</p>

<p><a href="https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx">Full code here</a></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span>
		<span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
			<span class="o">&lt;</span><span class="nx">Image</span>
				<span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">cover</span><span class="p">}</span>
    			<span class="nx">alt</span><span class="o">=</span><span class="s2">"Book cover"</span>
<span class="p">...</span>
</code></pre></div></div>

<p>Until now we created 3 <code class="highlighter-rouge">Book</code> components from the parent component <code class="highlighter-rouge">Library</code>, and set their values from the parent state.
Easy! Right?
Great, letâ€™s begin the second part</p>

<h2 id="passing-state-from-child-to-parent">Passing state from child to parent</h2>

<p>In this section, we want to handle the number of books you read by checking on each book checkbox.</p>

<p>In our <code class="highlighter-rouge">Book</code> we have this state</p>

<p><a href="https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx">Full code here</a></p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">status</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
	<span class="na">id</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span>
<span class="p">};</span>
</code></pre></div></div>

<p><em>Note</em> donâ€™t forget to pass <code class="highlighter-rouge">props</code> to componentâ€™s constructor.</p>

<p><code class="highlighter-rouge">status</code> means if you read this book or not, and its default value is <code class="highlighter-rouge">false</code>, <code class="highlighter-rouge">id</code> is the id of this book and i set it by book id like we learned in the previous section.</p>

<p>we need to handle change of this status then update the books array in the parent state.</p>

<p>In our <code class="highlighter-rouge">Book</code> component, weâ€™ll add a checkbox that recieve the change of the book status and pass <code class="highlighter-rouge">this.handleChange</code> to its <code class="highlighter-rouge">onChange</code> event like this:</p>

<p><a href="https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx">Full code here</a></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"checkbox"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"example"</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span></code></pre></div></div>

<p>you need to bind the function first, then update the <code class="highlighter-rouge">Book</code> state with the new status, after updating the child state weâ€™ll update the state of the parent <code class="highlighter-rouge">Library</code> like this:</p>

<p><a href="https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx">Full code here</a></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">handleChange</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">status</span><span class="p">:</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateLibraryCount</span><span class="p">);</span>
    <span class="p">}</span>

<span class="nx">updateLibraryCount</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">handleCounter</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
	<span class="p">}</span>
</code></pre></div></div>

<p>In <code class="highlighter-rouge">updateLibraryCount</code> we used <code class="highlighter-rouge">handleCounter</code> function of the <code class="highlighter-rouge">Library</code> as a prop, then passed the <code class="highlighter-rouge">Book</code> state to it, Now the <code class="highlighter-rouge">Library</code> sees the <code class="highlighter-rouge">Book</code> state, Great! letâ€™s use it.</p>

<p><a href="https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Library/Library.jsx">Full Code here</a></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">handleCounter</span><span class="p">(</span><span class="nx">_State</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Get the index of this book by searching by its unique isbn</span>
        <span class="kd">const</span> <span class="nx">ObjNum</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span>
			<span class="nx">_book</span> <span class="o">=&gt;</span> <span class="nx">_book</span><span class="p">.</span><span class="nx">isbn</span> <span class="o">===</span> <span class="nx">_State</span><span class="p">.</span><span class="nx">id</span>
        <span class="p">);</span>

        <span class="c1">//then update its value in the Library component</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span>
			<span class="p">{</span>
				<span class="na">books</span><span class="p">:</span> <span class="nx">update</span><span class="p">(</span>
					<span class="nx">ObjNum</span><span class="p">,</span>
					<span class="p">{...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span><span class="p">[</span><span class="nx">ObjNum</span><span class="p">],</span> <span class="na">status</span><span class="p">:</span> <span class="nx">_State</span><span class="p">.</span><span class="nx">status</span><span class="p">},</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span>
				<span class="p">)</span>
			<span class="p">},</span>
			<span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="c1">//this is a callback to handle the new change of the book status </span>
				<span class="c1">//and increment the reads</span>
				<span class="kd">const</span> <span class="nx">_read</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">_book</span> <span class="o">=&gt;</span> 
					<span class="nx">_book</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="kc">true</span>
				<span class="p">).</span><span class="nx">length</span><span class="p">;</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">reads</span><span class="p">:</span> <span class="nx">_read</span><span class="p">});</span>
			<span class="p">}</span>
		<span class="p">);</span>
	<span class="p">}</span>
</code></pre></div></div>

<p>I hope youâ€™re understand how to pass the state from the parent to child and vice versa, Hereâ€™s the <a href="https://github.com/zeyadetman/howmanybooks">full code</a>, and this is the <a href="https://zeyadetman.github.io/projects/2018/07/25/How-to-pass-state-between-components-in-reactjs.html">original post on my blog</a>. If you have questions, feel free to ask in comments or <a href="zeyadetman@gmail.com">email</a>.</p>

</div>
<div class="socialmedia">
    <div id="fb-root"></div>
    <div class="fb-share-button" data-href="/projects/2018/07/25/How-to-pass-state-between-components-in-reactjs.html" data-layout="button" data-size="large"       data-mobile-iframe="true"><a target="_blank" href="/projects/2018/07/25/How-to-pass-state-between-components-in-reactjs.html"                              class="fb-xfbml-parse-ignore"></a></div>

    <a class="twitter-share-button"
        href=
        "https://twitter.com/intent/tweet?text=How to pass state between components in reactjs (Full Code),%20read%20it%20on:%20"
        data-size="large"></a>
</div>



<div id="disqus_thread"></div>



<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMICVALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT:https://disqus.com/admin/universalcode/#configuration-variables*/

(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://zeyadetman.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();

(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.1&appId=269290577224281&autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  </div>
  
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/balloon-css/0.5.0/balloon.min.css">
<script async>
  const rotateDeg = (new Date().getHours()%12)*30;
  const img = document.getElementsByClassName('infosection')[0].children[0].children[0].children[0];
  console.log(rotateDeg, img)
  img.style.transform = `rotate(${rotateDeg}deg)`;

window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

</body>
</html>
